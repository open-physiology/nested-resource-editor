<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/common/PipeTransformModule.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <a data-ice="repoURL" href="https://github.com/open-physiology/nested-resource-editor" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">common</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/PipeTransformModule.js~FilterBy.html">FilterBy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/PipeTransformModule.js~HideClass.html">HideClass</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/PipeTransformModule.js~MapToOptions.html">MapToOptions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/PipeTransformModule.js~OrderBy.html">OrderBy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/PipeTransformModule.js~PipeTransformModule.html">PipeTransformModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/PipeTransformModule.js~SetToArray.html">SetToArray</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">common/components</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/components/CustomSelectModule.js~CustomSelectModule.html">CustomSelectModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/components/CustomSelectModule.js~MultiSelectInput.html">MultiSelectInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/components/CustomSelectModule.js~SingleSelectInput.html">SingleSelectInput</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">common/toolbars</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/toolbars/ToolbarSettingsModule.js~ToolbarPropertySettings.html">ToolbarPropertySettings</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/toolbars/ToolbarSettingsModule.js~ToolbarSettingsModule.html">ToolbarSettingsModule</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/MeasurableGeneratorModule.js~MeasurableGenerator.html">MeasurableGenerator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/MeasurableGeneratorModule.js~MeasurableGeneratorModule.html">MeasurableGeneratorModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/TemplateValueModule.js~TemplateValueComponent.html">TemplateValueComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/TemplateValueModule.js~TemplateValueModule.html">TemplateValueModule</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">panels</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/panels/AbstractResourceList.js~AbstractResourceList.html">AbstractResourceList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/panels/HighlightService.js~HighlightService.html">HighlightService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/panels/ItemHeader.js~ItemHeader.html">ItemHeader</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/panels/NestedResourceList.js~NestedResourceList.html">NestedResourceList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/panels/NestedResourceWidgetModule.js~NestedResourceWidget.html">NestedResourceWidget</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/panels/NestedResourceWidgetModule.js~NestedResourceWidgetModule.html">NestedResourceWidgetModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/panels/ResourcePanelModule.js~ResourcePanel.html">ResourcePanel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/panels/ResourcePanelModule.js~ResourcePanelModule.html">ResourcePanelModule</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">test-app</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/test-app/app.js~TestApp.html">TestApp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/test-app/app.js~TestAppModule.html">TestAppModule</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">toolbars</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/toolbars/ToolbarAddModule.js~ToolbarAdd.html">ToolbarAdd</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/toolbars/ToolbarAddModule.js~ToolbarAddModule.html">ToolbarAddModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/toolbars/ToolbarCommandsModule.js~ToolbarCommands.html">ToolbarCommands</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/toolbars/ToolbarCommandsModule.js~ToolbarCommandsModule.html">ToolbarCommandsModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/toolbars/ToolbarFilterModule.js~ToolbarFilter.html">ToolbarFilter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/toolbars/ToolbarFilterModule.js~ToolbarFilterModule.html">ToolbarFilterModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/toolbars/ToolbarSortModule.js~ToolbarSort.html">ToolbarSort</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/toolbars/ToolbarSortModule.js~ToolbarSortModule.html">ToolbarSortModule</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/common/PipeTransformModule.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import {NgModule, Pipe, PipeTransform} from &apos;@angular/core&apos;;
import isString from &apos;lodash-bound/isString&apos;;
import isUndefined from &apos;lodash-bound/isUndefined&apos;

@Pipe({name: &apos;hideClass&apos;})
/**
 * The HideClass pipe, hides resources of given classes.
 */
export class HideClass implements PipeTransform {
    /**
     * @param {Array&lt;Resource&gt;} items - the array of resources to filter
     * @param {Array&lt;string&gt;} classNames - the array of resource classes to hide
     *
     * @returns {Array&lt;Resource&gt;} - the array of filtered resources
     */
    transform(items, classNames = []) {
        return items.filter(x =&gt; !classNames.includes(x.class));
    }
}

/**
 * The FilterBy pipe, filters resources to select those that contain a given string in a given field.
 */
@Pipe({name: &apos;filterBy&apos;})
export class FilterBy implements PipeTransform {
    /**
     * @param {Array&lt;Resource&gt;} items - the array of resources to filter
     * @param {[string, string]} params - an array with two parameters:
     * [0] - the string that the resource field must contain, [1] - the resource field name
     * @returns {Array&lt;Resource&gt;} - the array of filtered resources
     */
    transform(items = [], params) {
        let [searchString, propName] = params;
        if (searchString.length === 0) { return items; }
        return items.filter(item =&gt; (typeof(item[propName]) === &apos;string&apos;)
            ? item[propName].toLowerCase().indexOf(searchString.toLowerCase()) !== -1
            : item[propName] === searchString);
    }
}

/**
 * The SetToArray pipe, converts a given set to an array.
 */
@Pipe({name: &apos;setToArray&apos;})
export class SetToArray implements PipeTransform {
    /**
     * @param {Set} items - the set of items
     * @returns {Array} - the array of items
     */
    transform(items) { return Array.from(items || {}).filter(x =&gt; !x::isUndefined()); }
}

/**
 * The OrderBy pipe, sorts given array according to the given sort mode
 */
@Pipe({name: &apos;orderBy&apos;, pure: false})
export class OrderBy implements PipeTransform {
    /**
     *
     * @param {Array} items - the array of items to sort
     * @param {string} sortMode - the sort mode, the property of the item used for sorting
     *  with optional &quot;-&quot; prefix to sort in the descending order.
     * @returns {Array} - the sorted array. If sortedMode equals &quot;unsorted&quot;, the function returns the input array without changes.
     */
    transform(items, sortMode) {
        let propName = (sortMode[0] === &apos;-&apos;)? sortMode.substring(1): sortMode;
        if (propName === &quot;unsorted&quot;) {
            return items;
        } else {
            if (!items || (items.length === 0)) {return items;}
            if (items[0]::isString()){
                return items.sort((a, b) =&gt; {
                    if ((sortMode[0] === &apos;-&apos;)) {//desc
                        return (a &gt; b) ? -1 : ((a &lt; b) ? 1 : 0);
                    } else {//asc
                        return (a &gt; b) ? 1 : ((a &lt; b) ? -1 : 0);
                    }
                });
            }
            return items.sort((a, b) =&gt; {
                if ((sortMode[0] === &apos;-&apos;)) {//desc
                    return (a[propName] &gt; b[propName])? -1: ((a[propName] &lt; b[propName])? 1: 0);
                } else {//asc
                    return (a[propName] &gt; b[propName])? 1: ((a[propName] &lt; b[propName])? -1: 0);
                }
            });
        }
    }
}

/**
 * The MapToOptions pipe, maps resources into objects for drop-down lists
 */
@Pipe({name: &apos;mapToOptions&apos;})
export class MapToOptions implements PipeTransform {
    /**
     * @param {Array&lt;Resource&gt;} items -  the array of resources to convert to the array of selection options
     * which are objects with fields &quot;id&quot; and &quot;text&quot;.
     * @returns {Array&lt;{value: string, label: string}&gt;} - the array of drop-down list selection options
     */
    transform(items = []) {
        return items.map(x =&gt;({value: x, label: x.name? x.name: &quot;(Unnamed) &quot; + x.class}))
    }
}


/**
 * The PipeTransformModule module, exports open-physiology helper pipes
 */
@NgModule({
    declarations: [ OrderBy, FilterBy, SetToArray, HideClass, MapToOptions],
    exports: [ OrderBy, FilterBy, SetToArray, HideClass, MapToOptions]
})
export class PipeTransformModule {}


</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
