<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/common/utils.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <a data-ice="repoURL" href="https://github.com/open-physiology/nested-resource-editor" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">common</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/PipeTransformModule.js~HideClass.html">HideClass</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/common/utils.js~TestClass.html">TestClass</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getClassLabel">getClassLabel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getColor">getColor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPropertyLabel">getPropertyLabel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getResourceIcon">getResourceIcon</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FilterBy">FilterBy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-OrderBy">OrderBy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-PipeTransformModule">PipeTransformModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SetToArray">SetToArray</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-model">model</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-modelClassNames">modelClassNames</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-modelRef">modelRef</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">common/components</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CustomSelectModule">CustomSelectModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MultiSelectInput">MultiSelectInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SingleSelectInput">SingleSelectInput</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">common/toolbars</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ToolbarPropertySettings">ToolbarPropertySettings</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ToolbarSettingsModule">ToolbarSettingsModule</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MeasurableGenerator">MeasurableGenerator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MeasurableGeneratorModule">MeasurableGeneratorModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TemplateValueComponent">TemplateValueComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TemplateValueModule">TemplateValueModule</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">panels</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-AbstractResourceList">AbstractResourceList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-HighlightService">HighlightService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ItemHeader">ItemHeader</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NestedResourceList">NestedResourceList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NestedResourceWidget">NestedResourceWidget</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NestedResourceWidgetModule">NestedResourceWidgetModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ResourcePanelModule">ResourcePanelModule</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">test-app</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TestApp">TestApp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TestAppModule">TestAppModule</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">toolbars</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ToolbarAdd">ToolbarAdd</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ToolbarAddModule">ToolbarAddModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ToolbarCommands">ToolbarCommands</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ToolbarCommandsModule">ToolbarCommandsModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ToolbarFilter">ToolbarFilter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ToolbarFilterModule">ToolbarFilterModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ToolbarSort">ToolbarSort</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ToolbarSortModule">ToolbarSortModule</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/common/utils.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&quot;use strict&quot;;

import &apos;../libs/rxjs&apos;;
import $ from &apos;../libs/jquery&apos;;

import modelFactory, {ajaxBackend} from &apos;open-physiology-model&apos;;

let {backend} = ajaxBackend({
    baseURL:     &apos;http://open-physiology.org:8880&apos;,
    ajax:        $.ajax
});

export const modelRef = modelFactory(backend);
export const model = modelRef.classes;
window.module = modelRef;

export const modelClassNames = {};
const visualClasses = [...model.Artefact.allSubclasses()].map(x =&gt; x.name);

for (let cls of Object.values(model)){
    if (cls.isResource &amp;&amp; !cls.abstract &amp;&amp; !visualClasses.includes(cls.name)){
        modelClassNames[cls.name] = cls.name;
        if (cls.name === model.Lyph.name){
            modelClassNames[&quot;LyphWithAxis&quot;] = &quot;LyphWithAxis&quot;;
        }
    }
}

/**
 * The TestClass is awesome!
 */
export class TestClass{

}

///////////////////////////////////////////////////
//Helpers
//////////////////////////////////////////////////
function hashCode(str) {
    var hash = 0;
    for (var i = 0; i &lt; str.length; i++) {
        hash = str.charCodeAt(i) + ((hash &lt;&lt; 5) - hash);
    }
    return hash;
}

function intToRGB(i){
    var c = (i &amp; 0x00FFFFFF)
        .toString(16)
        .toUpperCase();
    return &quot;00000&quot;.substring(0, 6 - c.length) + c;
}
/**
 * The getColor function assigns a color given a string
 * @param {string} str - the inpit string
 * @returns {string} - the RGB color value
 */
export const getColor = (str) =&gt; intToRGB(hashCode(str));

/**
 * The getPropertyLabel function replaces field name with human readable labels
 * @param {string} option - the open-physiology resource field name
 * @returns {string} - the user readable label
 */
export function getPropertyLabel(option: string): string{
    let custom = {
        &quot;externals&quot;: &quot;Annotations&quot;,
        &quot;locals&quot;: &quot;Local resources&quot;
    };

    if (custom[option]) {
        return custom[option];
    }

    if ([&quot;id&quot;, &quot;uri&quot;].includes(option)) {
        return option.toUpperCase();
    }

    let label = option.replace(/([a-z])([A-Z])/g, &apos;$1 $2&apos;);
    label = label[0].toUpperCase() + label.substring(1).toLowerCase();
    return label;
}

/**
 * The getClassLabel function provides an human readable label for open-physiology class
 * @param {Resource} clsName - the resource class name
 * @returns {string} - the human readable label
 */
export function getClassLabel(clsName: string): string{
    if (!clsName) { return &quot;&quot;; }
    let label = clsName;
    label = label.replace(/([a-z])([A-Z])/g, &apos;$1 $2&apos;);
    label = label[0].toUpperCase() + label.substring(1).toLowerCase();
    return label;
}

/**
 * The getResourceIcon function provides an icon for a given resource
 * @param {Resource} item - the resource
 * @returns {DataURI} - the icon for the resource class
 */
export function getResourceIcon(item): string{
    if (!item) { return &quot;&quot;; }
    if (item.class === model.Lyph.name &amp;&amp; item.axis) {
        return &quot;../images/lyphWithAxis.png&quot;;
    }
    let clsName = item.class;
    if (item.class === model.Type.name){
        clsName = (item[&apos;&lt;--DefinesType&apos;] &amp;&amp; item[&apos;&lt;--DefinesType&apos;][1])? item[&apos;&lt;--DefinesType&apos;][1].class: &quot;Resource&quot;;
    }
    return model[clsName].icon;
}






</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
